<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Husker Trail</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <style>
        /* CSS resets and basic setup */
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: #000;
            color: #00FF00; /* Classic green terminal */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* Main game container */
        #game-container {
            width: 90%;
            max-width: 800px;
            border: 3px solid #00FF00;
            background-color: #0A0A0A;
            box-shadow: 0 0 20px #00FF00;
        }

        /* Header / Title */
        header {
            text-align: center;
            padding: 20px;
            border-bottom: 3px solid #00FF00;
            background-color: #111;
        }

        h1 {
            font-size: 1.5rem;
            color: #FF0000; /* Husker Red */
            text-shadow: 2px 2px #FFFF00; /* Gold shadow */
            margin: 0;
        }

        /* Stats bar */
        #stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            border-bottom: 3px solid #00FF00;
            background-color: #111;
            flex-wrap: wrap;
        }

        .stat {
            font-size: 0.9rem;
            margin: 5px 10px;
        }
        
        #stat-progress-bar-container {
            width: 100%;
            background-color: #333;
            border: 1px solid #00FF00;
            height: 20px;
            margin-top: 10px;
        }

        #stat-progress-bar {
            width: 0%;
            height: 100%;
            background-color: #FF0000; /* Husker Red */
            transition: width 0.5s;
        }

        /* Main game log window */
        #game-log {
            padding: 20px;
            height: 300px;
            overflow-y: auto;
            border-bottom: 3px solid #00FF00;
            line-height: 1.5;
        }

        #game-log p {
            margin: 0 0 10px 0;
            text-indent: 2em;
        }

        #game-log .event {
            color: #FFFFFF; /* White for events */
        }

        #game-log .choice {
            color: #FFFF00; /* Yellow for choices */
        }

        #game-log .result {
            color: #00FF00; /* Green for positive results */
        }

        #game-log .penalty {
            color: #FF6347; /* Tomato red for negative results */
        }

        #game-log .win {
            font-size: 1.2rem;
            color: #FF0000;
            text-align: center;
        }

        #game-log .lose {
            font-size: 1.2rem;
            color: #FF6347;
            text-align: center;
        }

        /* Action/choice button area */
        #actions-container {
            padding: 20px;
            text-align: center;
        }

        button {
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            color: #000;
            background-color: #00FF00;
            border: 2px solid #00FF00;
            padding: 15px 25px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.2s;
        }

        button:hover {
            background-color: #000;
            color: #00FF00;
            box-shadow: 0 0 10px #00FF00;
        }

        button:disabled {
            background-color: #555;
            color: #999;
            border-color: #999;
            cursor: not-allowed;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <header>
            <h1>The Husker Trail</h1>
        </header>

        <div id="stats-bar">
            <span class="stat" id="stat-money">Money: $50</span>
            <span class="stat" id="stat-energy">Energy: 100</span>
            <span class="stat" id="stat-spirit">Spirit: 100</span>
        </div>
        <div id="stat-progress-bar-container">
            <div id="stat-progress-bar"></div>
        </div>

        <div id="game-log">
            </div>

        <div id="actions-container">
            <button id="start-button">Start Your Trek</button>
        </div>
    </div>

    <script>
        // --- GAME STATE ---
        let gameState = {
            money: 50,
            energy: 100,
            spirit: 100,
            progress: 0,
            gameActive: false
        };

        // --- DOM ELEMENTS ---
        const gameLog = document.getElementById('game-log');
        const actionsContainer = document.getElementById('actions-container');
        const startButton = document.getElementById('start-button');
        
        const statMoney = document.getElementById('stat-money');
        const statEnergy = document.getElementById('stat-energy');
        const statSpirit = document.getElementById('stat-spirit');
        const statProgressBar = document.getElementById('stat-progress-bar');

        // --- GAME EVENTS ARRAY ---
        // This is the core of the game's replayability.
        const events = [
            {
                type: 'auto',
                text: "You trip on a cracked sidewalk on P Street.",
                result: "You drop your phone, but it's okay. -5 Energy, -5 Spirit.",
                energy: -5,
                spirit: -5,
                money: 0
            },
            {
                type: 'auto',
                text: "You smell the sizzle of a Valentino's slice.",
                result: "The glorious smell boosts your morale. +10 Spirit.",
                energy: 0,
                spirit: 10,
                money: 0
            },
            {
                type: 'auto',
                text: "A scooter zips by, splashing puddle water on you.",
                result: "Your jeans are soaked. -15 Spirit.",
                energy: 0,
                spirit: -15,
                money: 0
            },
            {
                type: 'auto',
                text: "You see a rival fan wearing 'that' color.",
                result: "It fills you with determination. +10 Spirit.",
                energy: 0,
                spirit: 10,
                money: 0
            },
            {
                type: 'auto',
                text: "You get a text: 'Your Canvas quiz is due at kickoff.'",
                result: "Instant dread. -20 Spirit.",
                energy: 0,
                spirit: -20,
                money: 0
            },
            {
                type: 'auto',
                text: "You find a $10 bill on the ground!",
                result: "Your luck is turning around! +$10.",
                energy: 0,
                spirit: 5,
                money: 10
            },
            {
                type: 'choice',
                text: "You run into a classmate you barely know. They want to chat.",
                choices: [
                    {
                        text: "Chat politely for a bit.",
                        result: "You talk about the midterm. It's draining. -10 Energy, -5 Spirit.",
                        energy: -10,
                        spirit: -5,
                        money: 0
                    },
                    {
                        text: "Pretend you have a call and walk off.",
                        result: "You feel a little guilty, but save time. -5 Spirit.",
                        energy: 0,
                        spirit: -5,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You're passing a tailgate. They offer you a free hotdog.",
                choices: [
                    {
                        text: "Accept the hotdog.",
                        result: "Tastes like victory! +15 Energy, +10 Spirit.",
                        energy: 15,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Decline and keep moving.",
                        result: "You press onward, but your stomach rumbles. -5 Energy.",
                        energy: -5,
                        spirit: 0,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "A street vendor is selling $10 'Beat The Other Team' buttons.",
                choices: [
                    {
                        text: "Buy one!",
                        result: "It's ugly, but it shows your spirit! -$10, +15 Spirit.",
                        energy: 0,
                        spirit: 15,
                        money: -10
                    },
                    {
                        text: "Save your money.",
                        result: "You wisely keep your cash.",
                        energy: 0,
                        spirit: 0,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "The line at the bar you're meeting friends at is huge.",
                choices: [
                    {
                        text: "Wait in line.",
                        result: "It takes forever. You're tired and sober. -15 Energy, -10 Spirit.",
                        energy: -15,
                        spirit: -10,
                        money: 0
                    },
                    {
                        text: "Tell your friends to meet you closer.",
                        result: "They're annoyed, but you save time. -5 Spirit.",
                        energy: 0,
                        spirit: -5,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "Disaster! You pat your pocket and... YOU LOST YOUR N-CARD!",
                choices: [
                    {
                        text: "Go to the ticket office and pay the $25 replacement fee.",
                        result: "It's a painful loss, but you have your ticket. -$25, -20 Spirit.",
                        energy: -5,
                        spirit: -20,
                        money: -25
                    },
                    {
                        text: "Try to find a friend who can 'get you in'.",
                        result: "You waste 20 minutes and they can't help. -15 Energy, -15 Spirit.",
                        energy: -15,
                        spirit: -15,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "Your roommate texts: 'I'M LOCKED OUT! Can you come back?'",
                choices: [
                    {
                        text: "Be a good friend and go back.",
                        result: "You trek all the way back to your dorm. -30 Progress, -20 Energy.",
                        energy: -20,
                        spirit: 0,
                        money: 0,
                        progress: -30 // Special progress penalty
                    },
                    {
                        text: "Text them 'Sorry, R.A. is on duty. GBR.'",
                        result: "You feel terrible. But the game is calling. -30 Spirit.",
                        energy: 0,
                        spirit: -30,
                        money: 0
                    }
                ]
            }
        ];

        // --- EVENT LISTENERS ---
        startButton.addEventListener('click', startGame);

        // --- GAME FUNCTIONS ---

        function startGame() {
            // Reset game state
            gameState = {
                money: 50,
                energy: 100,
                spirit: 100,
                progress: 0,
                gameActive: true
            };
            
            // Clear log and actions
            gameLog.innerHTML = '';
            actionsContainer.innerHTML = '';
            
            logMessage("Your trek to Memorial Stadium begins! It's 2 hours to kickoff.", 'event');
            logMessage("You leave your apartment near 14th and P.", 'event');

            updateStatsUI();
            showMainAction();
        }

        // Updates the stats display
        function updateStatsUI() {
            // Enforce boundaries
            if (gameState.energy > 100) gameState.energy = 100;
            if (gameState.spirit > 100) gameState.spirit = 100;
            if (gameState.progress < 0) gameState.progress = 0;

            statMoney.textContent = `Money: $${gameState.money}`;
            statEnergy.textContent = `Energy: ${gameState.energy}`;
            statSpirit.textContent = `Spirit: ${gameState.spirit}`;
            
            // Update progress bar
            let progressPercent = (gameState.progress / 100) * 100;
            statProgressBar.style.width = `${progressPercent}%`;
            
            // Change progress bar color based on spirit
            if(gameState.spirit < 30) {
                statProgressBar.style.backgroundColor = '#FF6347'; // Low spirit
            } else if (gameState.spirit < 60) {
                statProgressBar.style.backgroundColor = '#FFFF00'; // Med spirit
            } else {
                statProgressBar.style.backgroundColor = '#FF0000'; // High spirit
            }
        }

        // Adds a message to the game log
        function logMessage(message, className = '') {
            const p = document.createElement('p');
            p.textContent = message;
            if (className) {
                p.classList.add(className);
            }
            gameLog.appendChild(p);
            // Auto-scroll to bottom
            gameLog.scrollTop = gameLog.scrollHeight;
        }

        // Shows the main "Continue" button
        function showMainAction() {
            actionsContainer.innerHTML = '';
            const continueButton = createButton('Continue the Trek', takeStep);
            actionsContainer.appendChild(continueButton);
        }

        // Helper to create buttons
        function createButton(text, onClick) {
            const button = document.createElement('button');
            button.textContent = text;
            button.addEventListener('click', onClick);
            return button;
        }

        // Main game loop function
        function takeStep() {
            if (!gameState.gameActive) return;

            // Each step costs energy and moves you forward
            const progressGain = Math.floor(Math.random() * 10) + 10; // 10-19 progress
            gameState.progress += progressGain;
            gameState.energy -= 5;
            
            logMessage(`You weave through the crowds. +${progressGain} Progress, -5 Energy.`, 'event');
            updateStatsUI();

            // Check for win condition
            if (checkGameState()) return;

            // Trigger a random event
            triggerRandomEvent();
        }

        function triggerRandomEvent() {
            const event = events[Math.floor(Math.random() * events.length)];
            
            logMessage(event.text, 'choice');
            actionsContainer.innerHTML = ''; // Clear "Continue" button

            if (event.type === 'auto') {
                // Automatically apply results
                applyStatChanges(event);
                logMessage(event.result, 'penalty');
                updateStatsUI();
                if (checkGameState()) return;
                // Put the "Continue" button back
                showMainAction();

            } else if (event.type === 'choice' || event.type === 'major_obstacle') {
                // Create choice buttons
                event.choices.forEach(choice => {
                    const choiceButton = createButton(choice.text, () => resolveChoice(choice));
                    
                    // Check if choice is affordable
                    if (choice.money < 0 && gameState.money < Math.abs(choice.money)) {
                        choiceButton.disabled = true;
                    }
                    actionsContainer.appendChild(choiceButton);
                });
            }
        }

        function resolveChoice(choice) {
            applyStatChanges(choice);
            logMessage(choice.result, choice.energy > 0 || choice.spirit > 0 ? 'result' : 'penalty');
            
            updateStatsUI();
            if (checkGameState()) return;
            
            // Put the "Continue" button back
            showMainAction();
        }
        
        function applyStatChanges(effect) {
            if(effect.money) gameState.money += effect.money;
            if(effect.energy) gameState.energy += effect.energy;
            if(effect.spirit) gameState.spirit += effect.spirit;
            if(effect.progress) gameState.progress += effect.progress;
        }

        // Checks for win or lose conditions
        function checkGameState() {
            if (!gameState.gameActive) return true; // Game already over

            if (gameState.progress >= 100) {
                endGame(true);
                return true;
            }
            if (gameState.energy <= 0) {
                logMessage("You've run out of energy. The couch calls to you...", 'lose');
                logMessage("You turn around and go home to take a nap. Game Over.", 'lose');
                endGame(false);
                return true;
            }
            if (gameState.spirit <= 0) {
                logMessage("You're too demoralized. You can't handle the crowds.", 'lose');
                logMessage("You decide to just watch the game from a bar. Game Over.", 'lose');
                endGame(false);
                return true;
            }
            if (gameState.money < 0) {
                logMessage("You check your bank account. You're broke!", 'lose');
                logMessage("You can't even afford a water. You go home. Game Over.", 'lose');
                endGame(false);
                return true;
            }
            
            return false; // Game continues
        }

        function endGame(isWin) {
            gameState.gameActive = false;
            actionsContainer.innerHTML = ''; // Clear buttons

            if (isWin) {
                logMessage("YOU'VE MADE IT!", 'win');
                logMessage("You find your seat just in time for the Tunnel Walk! GO BIG RED!", 'win');
                statProgressBar.style.width = '100%';
                statProgressBar.style.backgroundColor = '#FF0000';
            }

            // Show "Play Again" button
            const playAgainButton = createButton('Play Again?', startGame);
            actionsContainer.appendChild(playAgainButton);
        }

    </script>
</body>
</html>