<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Husker Trail</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <style>
        /* CSS resets and basic setup */
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: #000;
            color: #00FF00; /* Classic green terminal */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* Main game container */
        #game-container {
            width: 90%;
            max-width: 800px;
            border: 3px solid #00FF00;
            background-color: #0A0A0A;
            box-shadow: 0 0 20px #00FF00;
        }

        /* Header / Title */
        header {
            text-align: center;
            padding: 20px;
            border-bottom: 3px solid #00FF00;
            background-color: #111;
        }

        /* Daily Nebraskan text styling */
        #daily-nebraskan-header {
            font-size: 0.9rem; /* Smaller than game title */
            color: #FFFFFF; /* White text for contrast */
            margin-bottom: 10px; /* Space between this and the main title */
            text-shadow: 1px 1px #000000; /* Slight shadow for readability */
        }

        h1 {
            font-size: 1.5rem;
            color: #FF0000; /* Husker Red */
            text-shadow: 2px 2px #FFFF00; /* Gold shadow */
            margin: 0;
        }


        /* Stats bar */
        #stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            border-bottom: 3px solid #00FF00;
            background-color: #111;
            flex-wrap: wrap;
        }

        .stat {
            font-size: 0.9rem;
            margin: 5px 10px;
        }
        
        #stat-progress-bar-container {
            width: 100%;
            background-color: #333;
            border: 1px solid #00FF00;
            height: 20px;
            margin-top: 10px;
        }

        #stat-progress-bar {
            width: 0%;
            height: 100%;
            background-color: #FF0000; /* Husker Red */
            transition: width 0.5s;
        }

        /* Main game log window */
        #game-log {
            padding: 20px;
            height: 300px;
            overflow-y: auto;
            border-bottom: 3px solid #00FF00;
            line-height: 1.5;
        }

        #game-log p {
            margin: 0 0 10px 0;
        }

        /* --- STYLES FOR INSTRUCTIONS --- */
        #game-log .welcome {
            color: #FFFF00; /* Yellow */
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 20px;
        }
        
        #game-log .instructions {
             color: #FFFFFF; /* White */
             line-height: 1.6;
             margin-bottom: 15px;
        }
        
        #game-log .instructions strong {
            color: #FF6347; /* Tomato Red for emphasis on stats */
        }
        /* --- END NEW STYLES --- */


        /* Game message styles (with indent) */
        #game-log .event,
        #game-log .choice,
        #game-log .result,
        #game-log .penalty,
        #game-log .win,
        #game-log .lose {
            text-indent: 2em; /* Indent for game messages */
        }
        
        #game-log .event {
            color: #FFFFFF; /* White for events */
        }

        #game-log .choice {
            color: #FFFF00; /* Yellow for choices */
        }

        #game-log .result {
            color: #00FF00; /* Green for positive results */
        }

        #game-log .penalty {
            color: #FF6347; /* Tomato red for negative results */
        }

        #game-log .win {
            font-size: 1.2rem;
            color: #FF0000;
            text-align: center;
        }

        #game-log .lose {
            font-size: 1.2rem;
            color: #FF6347;
            text-align: center;
        }

        /* Action/choice button area */
        #actions-container {
            padding: 20px;
            text-align: center;
        }

        button {
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            color: #000;
            background-color: #00FF00;
            border: 2px solid #00FF00;
            padding: 15px 25px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.2s;
        }

        button:hover {
            background-color: #000;
            color: #00FF00;
            box-shadow: 0 0 10px #00FF00;
        }

        button:disabled {
            background-color: #555;
            color: #999;
            border-color: #999;
            cursor: not-allowed;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <header>
            <p id="daily-nebraskan-header">The Daily Nebraskan Presents:</p>
            <h1>The Husker Trail</h1>
        </header>

        <div id="stats-bar">
            <span class="stat" id="stat-money">Money: $40</span>
            <span class="stat" id="stat-energy">Energy: 100</span>
            <span class="stat" id="stat-spirit">Spirit: 100</span>
        </div>
        <div id="stat-progress-bar-container">
            <div id="stat-progress-bar"></div>
        </div>

        <div id="game-log">
            <p class="welcome">Welcome to The Husker Trail!</p>
            <p class="instructions">
                Your mission: Trek from your apartment to Memorial Stadium in time for kickoff. Reach <strong>100% Progress</strong> to win.
            </p>
            <p class="instructions">
                Keep an eye on your stats:
                <br>  - <strong>Energy:</strong> Your will to keep walking.
                <br>  - <strong>Spirit:</strong> Your Husker pride.
                <br>  - <strong>Money:</strong> For... emergencies.
            </p>
            <p class="instructions">
                If <strong>ANY</strong> of these hit 0, your trek is over!
            </p>
            <p class="instructions">
                Click "Start Your Trek" below to begin. Good luck.
            </p>
        </div>


        <div id="actions-container">
            <button id="start-button">Start Your Trek</button>
        </div>
    </div>

    <script>
        // --- GAME STATE ---
        let gameState = {
            money: 40,
            energy: 100,
            spirit: 100,
            progress: 0,
            gameActive: false,
            lastEventIndex: -1 
        };

        // --- DOM ELEMENTS ---
        const gameLog = document.getElementById('game-log');
        const actionsContainer = document.getElementById('actions-container');
        const startButton = document.getElementById('start-button');
        
        const statMoney = document.getElementById('stat-money');
        const statEnergy = document.getElementById('stat-energy');
        const statSpirit = document.getElementById('stat-spirit');
        const statProgressBar = document.getElementById('stat-progress-bar');

        // --- GAME EVENTS ARRAY ---
        // ALL events are now 'choice' or 'major_obstacle'
        const events = [
            {
                type: 'choice',
                text: "You trip on a cracked sidewalk on P Street!",
                choices: [
                    {
                        text: "Shake it off.",
                        result: "You're tough, but it rattled you. -8 Energy, -5 Spirit.",
                        energy: -8,
                        spirit: -5,
                        money: 0
                    },
                    {
                        text: "Complain loudly.",
                        result: "Venting helps, but you're still annoyed. -5 Energy, -10 Spirit.",
                        energy: -5,
                        spirit: -10,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You smell the sizzle of a Valentino's slice.",
                choices: [
                    {
                        text: "Inhale deeply.",
                        result: "The glorious smell boosts your morale. +10 Spirit.",
                        energy: 0,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Buy a slice ($5).",
                        result: "A costly but delicious detour. +15 Energy, +5 Spirit, -$5.",
                        energy: 15,
                        spirit: 5,
                        money: -5
                    }
                ]
            },
            {
                type: 'choice',
                text: "A scooter zips by, splashing puddle water on you!",
                choices: [
                    {
                        text: "Yell at them.",
                        result: "They're gone. You're just wet and angry. -20 Spirit.",
                        energy: 0,
                        spirit: -20,
                        money: 0
                    },
                    {
                        text: "Sigh and move on.",
                        result: "You're soaked, but what can you do? -15 Spirit, -5 Energy.",
                        energy: -5,
                        spirit: -15,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You see a rival fan wearing 'that' color.",
                choices: [
                    {
                        text: "Give them a mean look.",
                        result: "It fills you with determination. +10 Spirit.",
                        energy: 0,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Yell 'Go Big Red!'",
                        result: "You shout it loud! +15 Spirit, -5 Energy.",
                        energy: -5,
                        spirit: 15,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "BZZZT! A text: 'Your Canvas quiz is due at kickoff.'",
                choices: [
                    {
                        text: "Try to forget it.",
                        result: "The dread is real. It'll hang over you. -25 Spirit.",
                        energy: 0,
                        spirit: -25,
                        money: 0
                    },
                    {
                        text: "Stop and do it.",
                        result: "You rush through it. C's get degrees. -15 Energy, -10 Spirit, -10 Progress.",
                        energy: -15,
                        spirit: -10,
                        money: 0,
                        progress: -10
                    }
                ]
            },
            {
                type: 'choice',
                text: "You spot a $10 bill on the ground!",
                choices: [
                    {
                        text: "Pocket it!",
                        result: "Finders keepers! +$10, +5 Spirit.",
                        energy: 0,
                        spirit: 5,
                        money: 10
                    },
                    {
                        text: "Ask around.",
                        result: "A nearby person says 'Oh, thank you!' and takes it. You feel good, but... -10 Energy, +10 Spirit.",
                        energy: -10,
                        spirit: 10,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You run into a classmate you barely know. They want to chat.",
                choices: [
                    {
                        text: "Chat politely for a bit.",
                        result: "You talk about the midterm. It's draining. -12 Energy, -8 Spirit.",
                        energy: -12,
                        spirit: -8,
                        money: 0
                    },
                    {
                        text: "Pretend you have a call.",
                        result: "You feel a little guilty, but save time. -10 Spirit.",
                        energy: 0,
                        spirit: -10,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You're passing a tailgate. They offer you a free hotdog.",
                choices: [
                    {
                        text: "Accept the hotdog.",
                        result: "Tastes like victory! +15 Energy, +10 Spirit.",
                        energy: 15,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Decline and keep moving.",
                        result: "You press onward, but your stomach rumbles. -5 Energy.",
                        energy: -5,
                        spirit: 0,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "A street vendor is selling $10 'Beat The Other Team' buttons.",
                choices: [
                    {
                        text: "Buy one!",
                        result: "It's ugly, but it shows your spirit! -$10, +15 Spirit.",
                        energy: 0,
                        spirit: 15,
                        money: -10
                    },
                    {
                        text: "Save your money.",
                        result: "You wisely keep your cash.",
                        energy: 0,
                        spirit: 0,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "The line at the bar you're meeting friends at is huge.",
                choices: [
                    {
                        text: "Wait in line.",
                        result: "It takes forever. You're tired and sober. -20 Energy, -15 Spirit.",
                        energy: -20,
                        spirit: -15,
                        money: 0
                    },
                    {
                        text: "Tell your friends to meet you closer.",
                        result: "They're annoyed, but you save time. -5 Spirit.",
                        energy: 0,
                        spirit: -5,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "Disaster! You pat your pocket and... YOU LOST YOUR N-CARD!",
                choices: [
                    {
                        text: "Pay $25 replacement fee.",
                        result: "It's a painful loss, but you have your ticket. -$25, -25 Spirit.",
                        energy: -5,
                        spirit: -25,
                        money: -25
                    },
                    {
                        text: "Try to find a friend to help.",
                        result: "You waste 20 minutes and they can't help. -20 Energy, -20 Spirit.",
                        energy: -20,
                        spirit: -20,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "Your roommate texts: 'I'M LOCKED OUT! Can you come back?'",
                choices: [
                    {
                        text: "Be a good friend and go back.",
                        result: "You trek all the way back. -30 Progress, -25 Energy.",
                        energy: -25,
                        spirit: 0,
                        money: 0,
                        progress: -30 
                    },
                    {
                        text: "Text them 'Sorry, R.A. is on duty.'",
                        result: "You feel terrible. But the game is calling. -35 Spirit.",
                        energy: 0,
                        spirit: -35,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You hear 'Sirius' playing from a nearby tailgate.",
                choices: [
                    {
                        text: "Nod along to the beat.",
                        result: "It gets you hyped! +15 Spirit.",
                        energy: 0,
                        spirit: 15,
                        money: 0
                    },
                    {
                        text: "Sing out loud!",
                        result: "You're a little off-key, but who cares! +20 Spirit, -5 Energy.",
                        energy: -5,
                        spirit: 20,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "A sudden, cold gust of wind almost steals your hat!",
                choices: [
                    {
                        text: "Grab your hat!",
                        result: "You save it, but the stress is real. -8 Energy, -8 Spirit.",
                        energy: -8,
                        spirit: -8,
                        money: 0
                    },
                    {
                        text: "Hunker down.",
                        result: "You brace yourself against the wind. -10 Energy, -5 Spirit.",
                        energy: -10,
                        spirit: -5,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "The line to cross 10th & Q street is massive.",
                choices: [
                    {
                        text: "Wait patiently.",
                        result: "You're stuck waiting for the light. -8 Energy.",
                        energy: -8,
                        spirit: 0,
                        money: 0
                    },
                    {
                        text: "Jaywalk (Risky!)",
                        result: "You dart across! A car honks! +5 Energy (adrenaline), -15 Spirit (stress).",
                        energy: 5,
                        spirit: -15,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You're getting hungry. You pass a Runza.",
                choices: [
                    {
                        text: "Buy a classic Runza ($8).",
                        result: "A Nebraska tradition! -$8, +20 Energy, +5 Spirit.",
                        energy: 20,
                        spirit: 5,
                        money: -8
                    },
                    {
                        text: "Save your money.",
                        result: "Your stomach growls in protest. -5 Energy.",
                        energy: -5,
                        spirit: 0,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "A local news crew is interviewing fans live.",
                choices: [
                    {
                        text: "Give a 'Go Big Red!' soundbite.",
                        result: "You're a natural! Your friends see you on TV. +15 Spirit.",
                        energy: 0,
                        spirit: 15,
                        money: 0
                    },
                    {
                        text: "Dodge the camera.",
                        result: "You're not in the mood for fame. -10 Spirit.",
                        energy: 0,
                        spirit: -10,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "Someone is handing out free red bead necklaces.",
                choices: [
                    {
                        text: "Take one.",
                        result: "You look festive! +10 Spirit.",
                        energy: 0,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Ignore them.",
                        result: "You're too cool for free beads. -10 Spirit.",
                        energy: 0,
                        spirit: -10,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "The digital ticket on your phone won't load! No service!",
                choices: [
                    {
                        text: "Panic and run to the Union for Wi-Fi.",
                        result: "You sprint there and back. It works, but... -30 Energy, -20 Spirit.",
                        energy: -30,
                        spirit: -20,
                        money: 0
                    },
                    {
                        text: "Keep refreshing and hold your phone up.",
                        result: "After 5 stressful minutes, it finally loads! -20 Spirit.",
                        energy: 0,
                        spirit: -20,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "Your friend texts: 'I'M AT THE BOB DEVANEY CENTER! 😭'",
                choices: [
                    {
                        text: "Tell them to catch a bus and you'll wait.",
                        result: "They're your responsibility. You wait. -20 Energy, -25 Spirit.",
                        energy: -20,
                        spirit: -25,
                        money: 0
                    },
                    {
                        text: "Tell them 'Good luck. See you inside.'",
                        result: "It's brutal, but the game is calling. -35 Spirit.",
                        energy: 0,
                        spirit: -35,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "A friendly alum hands you a 'Beat The Other Team' sticker.",
                choices: [
                    {
                        text: "Take it.",
                        result: "A nice gesture. +10 Spirit.",
                        energy: 0,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Politely decline.",
                        result: "You have no more room on your jacket. -5 Spirit.",
                        energy: 0,
                        spirit: -5,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You pass a Daily Nebraskan newspaper box. Headline: 'HUSKERS POISED FOR VICTORY!'",
                choices: [
                    {
                        text: "Glance and keep walking.",
                        result: "The positive news gets you pumped! +10 Spirit.",
                        energy: 0,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Stop to read the article.",
                        result: "You're inspired, but you wasted time. +15 Spirit, -5 Energy.",
                        energy: -5,
                        spirit: 15,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "You see a DN photographer taking crowd shots.",
                choices: [
                    {
                        text: "Wave and pose!",
                        result: "You might be in the paper! +10 Spirit.",
                        energy: 0,
                        spirit: 10,
                        money: 0
                    },
                    {
                        text: "Look away.",
                        result: "You feel invisible. -5 Spirit.",
                        energy: 0,
                        spirit: -5,
                        money: 0
                    }
                ]
            },
            {
                type: 'choice',
                text: "Someone is handing out the DN's special gameday edition.",
                choices: [
                    {
                        text: "Take one to read.",
                        result: "You walk and read. You learn a new stat, but trip. +5 Spirit, -5 Energy.",
                        energy: -5,
                        spirit: 5,
                        money: 0
                    },
                    {
                        text: "Keep your hands free.",
                        result: "You jog past, focused on the game.",
                        energy: 0,
                        spirit: 0,
                        money: 0
                    }
                ]
            },
            {
                type: 'major_obstacle',
                text: "A Daily Nebraskan reporter stops you! 'Can I get a quote about your gameday outfit?'",
                choices: [
                    {
                        text: "Strike a pose and give a quote.",
                        result: "You feel like a celebrity! +20 Spirit.",
                        energy: 0,
                        spirit: 20,
                        money: 0
                    },
                    {
                        text: "Shy away and mumble 'no thanks'.",
                        result: "You feel awkward and embarrassed. -15 Spirit.",
                        energy: 0,
                        spirit: -15,
                        money: 0
                    }
                ]
            }
        ];

        // --- EVENT LISTENERS ---
        startButton.addEventListener('click', startGame);

        // --- GAME FUNCTIONS ---

        function startGame() {
            // Reset game state
            gameState = {
                money: 40, 
                energy: 100,
                spirit: 100,
                progress: 0,
                gameActive: true,
                lastEventIndex: -1 
            };
            
            // Clear log (removes instructions) and actions
            gameLog.innerHTML = '';
            actionsContainer.innerHTML = '';
            
            logMessage("Your trek to Memorial Stadium begins! It's 2 hours to kickoff.", 'event');
            logMessage("You leave your apartment near 14th and P.", 'event');

            updateStatsUI();
            showMainAction();
        }

        // Updates the stats display
        function updateStatsUI() {
            // Enforce boundaries
            if (gameState.energy > 100) gameState.energy = 100;
            if (gameState.spirit > 100) gameState.spirit = 100;
            if (gameState.progress < 0) gameState.progress = 0;

            statMoney.textContent = `Money: $${gameState.money}`;
            statEnergy.textContent = `Energy: ${gameState.energy}`;
            statSpirit.textContent = `Spirit: ${gameState.spirit}`;
            
            // Update progress bar
            let progressPercent = (gameState.progress / 100) * 100;
            statProgressBar.style.width = `${progressPercent}%`;
            
            // Change progress bar color based on spirit
            if(gameState.spirit < 30) {
                statProgressBar.style.backgroundColor = '#FF6347'; // Low spirit
            } else if (gameState.spirit < 60) {
                statProgressBar.style.backgroundColor = '#FFFF00'; // Med spirit
            } else {
                statProgressBar.style.backgroundColor = '#FF0000'; // High spirit
            }
        }

        // Adds a message to the game log
        function logMessage(message, className = '') {
            const p = document.createElement('p');
            p.textContent = message;
            if (className) {
                p.classList.add(className);
            }
            gameLog.appendChild(p);
            // Auto-scroll to bottom
            gameLog.scrollTop = gameLog.scrollHeight;
        }

        // Shows the main "Continue" button
        function showMainAction() {
            actionsContainer.innerHTML = '';
            const continueButton = createButton('Continue the Trek', takeStep);
            actionsContainer.appendChild(continueButton);
        }

        // Helper to create buttons
        function createButton(text, onClick) {
            const button = document.createElement('button');
            button.textContent = text;
            button.addEventListener('click', onClick);
            return button;
        }

        // Main game loop function
        function takeStep() {
            if (!gameState.gameActive) return;

            // Each step costs more energy and moves you forward less
            const progressGain = Math.floor(Math.random() * 8) + 9; // 9-16 progress
            gameState.progress += progressGain;
            gameState.energy -= 7; 
            
            logMessage(`You weave through the crowds. +${progressGain} Progress, -7 Energy.`, 'event');
            updateStatsUI();

            // Check for win condition
            if (checkGameState()) return;

            // Trigger a random event
            triggerRandomEvent();
        }

        // --- REVISED FUNCTION ---
        // Removed the 'auto' event logic, as all events are now choices.
        function triggerRandomEvent() {
            // --- LOGIC TO PREVENT REPEATS ---
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * events.length);
            } while (newIndex === gameState.lastEventIndex && events.length > 1); 

            gameState.lastEventIndex = newIndex; 
            const event = events[newIndex];
            // --- END OF LOGIC ---
            
            logMessage(event.text, 'choice');
            actionsContainer.innerHTML = ''; // Clear "Continue" button

            // All events are 'choice' or 'major_obstacle', so we just create buttons
            event.choices.forEach(choice => {
                const choiceButton = createButton(choice.text, () => resolveChoice(choice));
                
                // Check if choice is affordable
                if (choice.money < 0 && gameState.money < Math.abs(choice.money)) {
                    choiceButton.disabled = true;
                }
                actionsContainer.appendChild(choiceButton);
            });
        }

        function resolveChoice(choice) {
            applyStatChanges(choice);
            logMessage(choice.result, choice.energy > 0 || choice.spirit > 0 ? 'result' : 'penalty');
            
            updateStatsUI();
            if (checkGameState()) return;
            
            // Put the "Continue" button back
            showMainAction();
        }
        
        function applyStatChanges(effect) {
            if(effect.money) gameState.money += effect.money;
            if(effect.energy) gameState.energy += effect.energy;
            if(effect.spirit) gameState.spirit += effect.spirit;
            if(effect.progress) gameState.progress += effect.progress;
        }

        // Checks for win or lose conditions
        function checkGameState() {
            if (!gameState.gameActive) return true; // Game already over

            if (gameState.progress >= 100) {
                endGame(true);
                return true;
            }
            if (gameState.energy <= 0) {
                logMessage("You've run out of energy. The couch calls to you...", 'lose');
                logMessage("You turn around and go home to take a nap. Game Over.", 'lose');
                endGame(false);
                return true;
            }
            if (gameState.spirit <= 0) {
                logMessage("You're too demoralized. You can't handle the crowds.", 'lose');
                logMessage("You decide to just watch the game from a bar. Game Over.", 'lose');
                endGame(false);
                return true;
            }
            if (gameState.money < 0) {
                logMessage("You check your bank account. You're broke!", 'lose');
                logMessage("You can't even afford a water. You go home. Game Over.", 'lose');
                endGame(false);
                return true;
            }
            
            return false; // Game continues
        }

        function endGame(isWin) {
            gameState.gameActive = false;
            actionsContainer.innerHTML = ''; // Clear buttons

            if (isWin) {
                logMessage("YOU'VE MADE IT!", 'win');
                logMessage("You find your seat just in time for the Tunnel Walk! GO BIG RED!", 'win');
                statProgressBar.style.width = '100%';
                statProgressBar.style.backgroundColor = '#FF0000';
            }

            // Show "Play Again" button
            const playAgainButton = createButton('Play Again?', startGame);
            actionsContainer.appendChild(playAgainButton);
        }

    </script>
</body>
</html>